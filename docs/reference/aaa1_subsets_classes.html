<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The sb_ generic methods support the following categories of S3 classes: 
atomic vector classes (vectors, matrices, arrays);
factors;
lists;
the data.frame-like classes data.frames, data.tables, tibbles, tidytables, 
and classes that are straight-forward inheritors from these classes
(such as sf-data.frames or sf-data.tables).


These categories of classes are quite different from each other.
It is vital to understand their differences,
in order to use the 'subsets' package properly. 
Thus this help page will explain their important properties and important differences. 

"><title>Supported S3 classes, With Important Comments — aaa1_subsets_classes • subsets</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Supported S3 classes, With Important Comments — aaa1_subsets_classes"><meta property="og:description" content="The sb_ generic methods support the following categories of S3 classes: 
atomic vector classes (vectors, matrices, arrays);
factors;
lists;
the data.frame-like classes data.frames, data.tables, tibbles, tidytables, 
and classes that are straight-forward inheritors from these classes
(such as sf-data.frames or sf-data.tables).


These categories of classes are quite different from each other.
It is vital to understand their differences,
in order to use the 'subsets' package properly. 
Thus this help page will explain their important properties and important differences. 

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">subsets</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Benchmarks.html">Benchmarks</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Supported S3 classes, With Important Comments</h1>
      
      <div class="d-none name"><code>aaa1_subsets_classes.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>sb_</code> generic methods support the following categories of S3 classes: <br></p><ul><li><p>atomic vector classes (vectors, matrices, arrays);</p></li>
<li><p>factors;</p></li>
<li><p>lists;</p></li>
<li><p>the data.frame-like classes data.frames, data.tables, tibbles, tidytables, <br>
and classes that are straight-forward inheritors from these classes
(such as sf-data.frames or sf-data.tables).</p></li>
</ul><p>These categories of classes are quite different from each other.
It is vital to understand their differences,
in order to use the 'subsets' package properly. <br>
Thus this help page will explain their important properties and important differences. <br><br><br></p>
    </div>


    <div class="section level2">
    <h2 id="auto-coercion-rules">Auto-Coercion Rules<a class="anchor" aria-label="anchor" href="#auto-coercion-rules"></a></h2>
    

<p><b>Coercion Semantics</b> <br>
The <a href="sb_mod.html">sb_mod</a> method
modify subsets of an object through a <b>deep copy</b>. <br>
The <a href="sb_set.html">sb_set</a> method and <a href="dt.html">dt_setcoe</a> function
modify subsets of an object <b>by reference</b>. <br>
These 2 copy semantics - "pass by reference" or "modify copy" -
have slightly different auto-coercion rules. These are explained in this section. <br>
Note that the <a href="sb_in.html">sb_before</a> and <a href="sb_in.html">sb_after</a> methods
usually allow coercion for all classes.
<br><br><b>Atomic</b> <br><img src="figures/coercion_through_copy-YES-darkgreen.svg" alt="[coercion_through_copy: YES]"><br><img src="figures/coercion_by_reference-NO-red.svg" alt="[coercion_by_reference: NO]"><br>
Atomic objects are automatically coerced to fit the modified subset values,
when modifying through copy. <br>
For example, replacing one or multiple values in an integer vector
(type <code>int</code>)
with a decimal number
(type <code>dbl</code>)
will coerce the entire vector to type <code>dbl</code>. <br><br>
Replacing or transforming subsets of atomic objects <b>by reference</b>
does NOT support coercion.
Thus, for example, the following code,</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">16</span></span>
<span><span class="fu"><a href="../reference/sb_set.html">sb_set</a></span><span class="op">(</span><span class="va">x</span>, i <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, rp <span class="op">=</span> <span class="fl">8.5</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre><p></p></div>
<p>gives <code>c(rep(8, 6) 7:16)</code> instead of <code>c(rep(8.5, 6), 7:16)</code>,
because <code>x</code> is of type <code>integer</code>, so <code>rp</code> is interpreted as type <code>integer</code> also. <br><br><br><b>Factor</b> <br><img src="figures/coercion_through_copy-NO-red.svg" alt="[coercion_through_copy: NO]"><br>
Factors only accept values that are part of their levels,
and thus do NOT support coercion on modification.
There is no mechanism for changing factors by reference at all. <br>
Replacing a value with a new value not part of its levels,
will result in the replacement value being <code>NA</code>. <br><br><br><b>List</b> <br><img src="figures/coercion_through_copy-depends-lightblue.svg" alt="[coercion_through_copy: depends]"><br><img src="figures/coercion_by_reference-depends-lightblue.svg" alt="[coercion_by_reference: depends]"><br>
Lists themselves allow complete change of their elements,
since lists are merely pointers. <br>
This is true regardless if replacement/transformation takes place by reference or through a copy. <br>
For example, the following code performs full coercion:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">letters</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">letters</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/sb_mod.html">sb_mod</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span>, rp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/sb_set.html">sb_set</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span>, rp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre><p></p></div>
<p>However, a recursive subset of a list which itself is not a list,
follows the coercion rules of whatever class the recursive subset is. <br>
For example the following code:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/sb_rec.html">sb_rec</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/sb_mod.html">sb_mod</a></span><span class="op">(</span>i <span class="op">=</span> <span class="fl">1</span>, rp <span class="op">=</span> <span class="st">"a"</span><span class="op">)</span> <span class="co"># coerces to character</span></span>
<span><span class="fu"><a href="../reference/sb_rec.html">sb_rec</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/sb_set.html">sb_set</a></span><span class="op">(</span>i <span class="op">=</span> <span class="fl">1</span>, rp <span class="op">=</span> <span class="st">"a"</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># no coercion; "a" replaced with NA.</span></span></code></pre><p></p></div>
<p>transforms recursive subsets according to the - in this case -
atomic auto-coercion rules. <br><br><br><b>Data.frame-like, when replacing/transforming whole columns</b> <br><img src="figures/coercion_through_copy-YES-darkgreen.svg" alt="[coercion_through_copy: YES]"><br><img src="figures/coercion_by_reference-YES-darkgreen.svg" alt="[coercion_by_reference: YES]"><br>
A data.frame-like objects
(data.frames, data.tables, tibbles, tidytables, and their sf-equivalents)
are actually lists, where each column is itself a list.
As such, replacing/transforming whole columns,
so <code>row = NULL</code> and <code>filter = NULL</code>,
allows completely changing the type of the column. <br>
Note that coercion of columns needs arguments
<code>row = NULL</code> and <code>filter = NULL</code>
in the <a href="sb_mod.html">sb_mod</a> and <a href="sb_set.html">sb_set</a> methods;
NO auto-coercion will take place when specifying something like <code>row = 1:nrow(x)</code>
(see next section). <br><br><br><b>Data.frame-like, when partially replacing/transforming columns</b> <br><img src="figures/coercion_through_copy-NO-red.svg" alt="[coercion_through_copy: NO]"><br><img src="figures/coercion_by_reference-NO-red.svg" alt="[coercion_by_reference: NO]"><br>
If rows are specified in the <a href="sb_mod.html">sb_mod</a> and <a href="sb_set.html">sb_set</a> methods,
and thus not whole columns but parts of columns are replaced or transformed,
NO auto-coercion takes place. <br>
I.e.: replacing/transforming a value in an integer (<code>int</code>) column to become <code>1.5</code>,
will NOT coerce the column to the decimal type (<code>dbl</code>);
instead, the replacement value <code>1.5</code> is coerced to integer <code>1</code>. <br>
The <code>coe</code> argument in the <a href="sb_mod.html">sb_mod</a> method
allows the user to enforce coercion,
even if subsets of columns are replaced/transformed instead of whole columns. <br>
Specifically, the <code>coe</code> arguments allows the user to specify a coercive function
to be applied on the entirety of every column specified in <code>col</code> or <code>vars</code>;
columns outside this subset are not affected. <br>
This coercion function is, of course,
applied before replacement (<code>rp</code>) or transformation (<code>tf()</code>). <br><br><br></p>
    </div>
    <div class="section level2">
    <h2 id="technical-details">Technical Details<a class="anchor" aria-label="anchor" href="#technical-details"></a></h2>
    

<p><b>Atomic</b> <br><img src="figures/require_unique_names-NO-red.svg" alt="[require unique names: NO]"><br>
The atomic vector is the most basic class type. <br>
Matrices and Arrays are just atomic vectors with dimension attributes. <br>
All elements in an atomic vector class
must have the same atomic type
("logical", "integer", "numeric", "complex", "character" and "raw"). <br>
Therefore, the <a href="sb_coe.html">sb_coe</a> method will coerce the entirety of an atomic vector,
NOT just a subset of it. <br><br><b>Factor</b> <br><img src="figures/require_unique_names-NO-red.svg" alt="[require unique names: NO]"><br>
Factors have the property that they can only store values that are defined in
their "levels" attribute; other values are not allowed, and thus result in <code>NA</code>s. <br>
Thus And <a href="sb_mod.html">sb_mod</a> does NOT coerce replacement values for factors!
This is quite different from the atomic vector classes,
which can store an infinite variety of values
(provided they are of the same atomic type). <br>
Due to these properties, there is NO <code><a href="sb_set.html">sb_set()</a></code> method for factors. <br><br><b>List</b> <br><img src="figures/require_unique_names-NO-red.svg" alt="[require unique names: NO]"><br>
Lists are recursive objects (i.e. they can be nested),
and they do not actually store values but rather store reference to other objects. <br>
Therefore <a href="sb_rec.html">sb_rec</a> method can be used to access recursive subsets of a list,
no matter how deep/low in hierarchy it is in the list. <br><br><b>Data.frame-like</b> <br><img src="figures/require_unique_names-YES-darkgreen.svg" alt="[require unique names: YES]"><br>
The data.frame-like objects quite different from the previously named classes. <br>
And the different data.frame-like classes also differ from each other quite a bit -
especially in terms of sub-setting. <br>
The 'subsets' R-package attempts to keep the data.frame methods as class agnostic as possible,
through the class agnostic functionality of the 'collapse' and 'data.table' R-packages. <br>
These 3 things cause some
<b>important</b>
oddities in how data.frame-like classes are treated differently from the other classes:</p><ul><li><p>Whole-columns will be auto-coerced when replaced/transformed by <code><a href="sb_mod.html">sb_mod()</a></code>,
but partial columns will NOT be auto-coerced.</p></li>
<li><p>The <a href="sb_x.html">sb_x</a> and <a href="sb_rm.html">sb_rm</a> methods always automatically conserve all attributes
(though names are adjusted accordingly, of course),
they are never stripped, unlike the other classes.</p></li>
<li><p>Giving a data.frame-like object with non-unique column names to the <code>sb_</code>-methods
returns an error.
Also, duplicating columns with <a href="sb_x.html">sb_x</a>
will automatically adjust the column names to make them unique. <br><br></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Coercion examples - Atomic ====</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">16</span></span></span>
<span class="r-in"><span><span class="fu"><a href="sb_set.html">sb_set</a></span><span class="op">(</span><span class="va">x</span>, i <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, rp <span class="op">=</span> <span class="fl">8.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  8  8  8  8  8  8  7  8  9 10 11 12 13 14 15 16</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#############################################################################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Coercion examples - List ====</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">letters</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">letters</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="sb_mod.html">sb_mod</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span>, rp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] a b c d e f g h i j k l m n o p q r s t u v w x y z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Levels: a b c d e f g h i j k l m n o p q r s t u v w x y z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="sb_set.html">sb_set</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span>, rp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] a b c d e f g h i j k l m n o p q r s t u v w x y z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Levels: a b c d e f g h i j k l m n o p q r s t u v w x y z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="sb_rec.html">sb_rec</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="sb_mod.html">sb_mod</a></span><span class="op">(</span>i <span class="op">=</span> <span class="fl">1</span>, rp <span class="op">=</span> <span class="st">"a"</span><span class="op">)</span> <span class="co"># coerces to character</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "a"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10"</span>
<span class="r-in"><span><span class="fu"><a href="sb_rec.html">sb_rec</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="sb_set.html">sb_set</a></span><span class="op">(</span>i <span class="op">=</span> <span class="fl">1</span>, rp <span class="op">=</span> <span class="st">"a"</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># no coercion; "a" replaced with NA.</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NAs introduced by coercion</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] NA  2  3  4  5  6  7  8  9 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  1  2  3  4  5  6  7  8  9 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#############################################################################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Coercion examples - data.frame-like - whole columns ====</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sb_mod():</span></span></span>
<span class="r-in"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, b <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>, c <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">20</span>, d <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span> <span class="co"># notice that columns "a" and "c" are INTEGER (`int`)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	10 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ a: int  1 2 3 4 5 6 7 8 9 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ b: chr  "a" "b" "c" "d" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ c: int  11 12 13 14 15 16 17 18 19 20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10</span>
<span class="r-in"><span><span class="fu"><a href="sb_mod.html">sb_mod</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">obj</span>, vars <span class="op">=</span> <span class="va">is.numeric</span>,</span></span>
<span class="r-in"><span>  tf <span class="op">=</span> <span class="va">sqrt</span> <span class="co"># SAFE: row=NULL &amp; filter = NULL, so coercion performed</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           a b        c d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1.000000 a 3.316625 a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  1.414214 b 3.464102 b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  1.732051 c 3.605551 c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  2.000000 d 3.741657 d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  2.236068 e 3.872983 e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  2.449490 f 4.000000 f</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  2.645751 g 4.123106 g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  2.828427 h 4.242641 h</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  3.000000 i 4.358899 i</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 3.162278 j 4.472136 j</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sb_set():</span></span></span>
<span class="r-in"><span><span class="fu"><a href="sb_set.html">sb_set</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">obj</span>, vars <span class="op">=</span> <span class="va">is.numeric</span>,</span></span>
<span class="r-in"><span>  tf <span class="op">=</span> <span class="va">sqrt</span> <span class="co"># SAFE: row=NULL &amp; filter = NULL, so coercion performed</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	10 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ a: num  1 1.41 1.73 2 2.24 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ b: chr  "a" "b" "c" "d" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ c: num  3.32 3.46 3.61 3.74 3.87 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#############################################################################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Coercion examples - data.frame-like - partial columns ====</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sb_mod():</span></span></span>
<span class="r-in"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, b <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>, c <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">20</span>, d <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span> <span class="co"># notice that columns "a" and "c" are INTEGER (`int`)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	10 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ a: int  1 2 3 4 5 6 7 8 9 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ b: chr  "a" "b" "c" "d" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ c: int  11 12 13 14 15 16 17 18 19 20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="sb_mod.html">sb_mod</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">obj</span>, filter <span class="op">=</span> <span class="op">~</span> <span class="op">(</span><span class="va">a</span> <span class="op">&gt;=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">c</span> <span class="op">&lt;=</span> <span class="fl">17</span><span class="op">)</span>, vars <span class="op">=</span> <span class="va">is.numeric</span>,</span></span>
<span class="r-in"><span>  tf <span class="op">=</span> <span class="va">sqrt</span> <span class="co"># WARNING: sqrt() results in `dbl`, but columns are `int`, so decimals lost</span></span></span>
<span class="r-in"><span><span class="op">)</span> </span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>1.414214 (type 'double') at RHS position 1 truncated (precision lost) when assigning to type 'integer' (column 1 named 'a')</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>3.464102 (type 'double') at RHS position 1 truncated (precision lost) when assigning to type 'integer' (column 3 named 'c')</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     a b  c d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1 a 11 a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   1 b  3 b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   1 c  3 c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   2 d  3 d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   2 e  3 e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   2 f  4 f</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   2 g  4 g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   8 h 18 h</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   9 i 19 i</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 10 j 20 j</span>
<span class="r-in"><span><span class="fu"><a href="sb_mod.html">sb_mod</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">obj</span>, filter <span class="op">=</span> <span class="op">~</span> <span class="op">(</span><span class="va">a</span> <span class="op">&gt;=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">c</span> <span class="op">&lt;=</span> <span class="fl">17</span><span class="op">)</span>, vars <span class="op">=</span> <span class="va">is.numeric</span>,</span></span>
<span class="r-in"><span>  coe <span class="op">=</span> <span class="va">as.double</span>, tf <span class="op">=</span> <span class="va">sqrt</span> <span class="co"># SAFE: coercion performed</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            a b         c d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1.000000 a 11.000000 a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   1.414214 b  3.464102 b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   1.732051 c  3.605551 c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   2.000000 d  3.741657 d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   2.236068 e  3.872983 e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   2.449490 f  4.000000 f</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   2.645751 g  4.123106 g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   8.000000 h 18.000000 h</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   9.000000 i 19.000000 i</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 10.000000 j 20.000000 j</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sb_set():</span></span></span>
<span class="r-in"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, b <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>, c <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">20</span>, d <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span> <span class="co"># notice that columns "a" and "c" are INTEGER (`int`)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	10 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ a: int  1 2 3 4 5 6 7 8 9 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ b: chr  "a" "b" "c" "d" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ c: int  11 12 13 14 15 16 17 18 19 20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10</span>
<span class="r-in"><span><span class="fu"><a href="sb_set.html">sb_set</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">obj</span>, filter <span class="op">=</span> <span class="op">~</span> <span class="op">(</span><span class="va">a</span> <span class="op">&gt;=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">c</span> <span class="op">&lt;=</span> <span class="fl">17</span><span class="op">)</span>, vars <span class="op">=</span> <span class="va">is.numeric</span>,</span></span>
<span class="r-in"><span>  tf <span class="op">=</span> <span class="va">sqrt</span> <span class="co"># WARNING: sqrt() results in `dbl`, but columns are `int`, so decimals lost</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>1.414214 (type 'double') at RHS position 1 truncated (precision lost) when assigning to type 'integer' (column 1 named 'a')</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>3.464102 (type 'double') at RHS position 1 truncated (precision lost) when assigning to type 'integer' (column 3 named 'c')</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     a b  c d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1 a 11 a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   1 b  3 b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   1 c  3 c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   2 d  3 d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   2 e  3 e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   2 f  4 f</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   2 g  4 g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   8 h 18 h</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   9 i 19 i</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 10 j 20 j</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, b <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>, c <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">20</span>, d <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	10 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ a: int  1 2 3 4 5 6 7 8 9 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ b: chr  "a" "b" "c" "d" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ c: int  11 12 13 14 15 16 17 18 19 20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10</span>
<span class="r-in"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="sb_coe.html">sb_coe</a></span><span class="op">(</span><span class="va">obj</span>, vars <span class="op">=</span> <span class="va">is.numeric</span>, v <span class="op">=</span> <span class="va">as.numeric</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	10 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ a: num  1 2 3 4 5 6 7 8 9 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ b: chr  "a" "b" "c" "d" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ c: num  11 12 13 14 15 16 17 18 19 20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10</span>
<span class="r-in"><span><span class="fu"><a href="sb_set.html">sb_set</a></span><span class="op">(</span><span class="va">obj</span>,</span></span>
<span class="r-in"><span>  filter <span class="op">=</span> <span class="op">~</span> <span class="op">(</span><span class="va">a</span> <span class="op">&gt;=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">c</span> <span class="op">&lt;=</span> <span class="fl">17</span><span class="op">)</span>, vars <span class="op">=</span> <span class="va">is.numeric</span>,</span></span>
<span class="r-in"><span>  tf <span class="op">=</span> <span class="va">sqrt</span> <span class="co"># SAFE: coercion performed by sb_coe(); so no warnings</span></span></span>
<span class="r-in"><span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            a b         c d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1.000000 a 11.000000 a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   1.414214 b  3.464102 b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   1.732051 c  3.605551 c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   2.000000 d  3.741657 d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   2.236068 e  3.872983 e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   2.449490 f  4.000000 f</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   2.645751 g  4.123106 g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   8.000000 h 18.000000 h</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   9.000000 i 19.000000 i</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 10.000000 j 20.000000 j</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Tony Wilkes.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

